# ğŸ—ï¸ æŠ€è¡“æ¶æ§‹èˆ‡å¯¦ä½œèªªæ˜

## ğŸ“ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹åœ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å¯¶å¯å¤¢å¯†æ–‡ç³»çµ±                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  index.html (ä¸»ç¨‹å¼ + UI æ¡†æ¶)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç•«é¢ä¸€        â”‚   ç•«é¢äºŒ        â”‚   ç•«é¢ä¸‰           â”‚
â”‚ (æ˜æ–‡è¼¸å…¥)      â”‚ (å¯¶å¯å¤¢é¸æ“‡)     â”‚ (å¯†æ–‡è¦–è¦ºåŒ–)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              JavaScript æ¨¡çµ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   app.js     â”‚ encryption.jsâ”‚  decryption.js    â”‚
â”‚ (ä¸»æ§åˆ¶é‚è¼¯)   â”‚  (åŠ å¯†æ¼”ç®—æ³•)  â”‚  (è§£å¯†æ¼”ç®—æ³•)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                utils.js (å·¥å…·å‡½æ•¸)                 â”‚
â”‚  â€¢ CSV è®€å– (PapaParse)                          â”‚
â”‚  â€¢ è³‡æ–™é©—è­‰                                       â”‚
â”‚  â€¢ æ ¼å¼åŒ–å·¥å…·                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å¤–éƒ¨è³‡æº                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pokemon_statsâ”‚   assets/    â”‚  CDN Libraries    â”‚
â”‚    .csv      â”‚  (åœ–æª”)       â”‚ â€¢ PapaParse       â”‚
â”‚              â”‚              â”‚ â€¢ Plotly.js       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–¼ï¸ åœ–æª”èªªæ˜

### åœ–æª”å‘½åè¦å‰‡
- å°åœ–ç¤ºï¼š`assets/icons/001.png`, `025.png` ç­‰
- å¤§åœ–ï¼š`assets/images/001.png`, `025.png` ç­‰
- ä½¿ç”¨ä¸‰ä½æ•¸å­—ç·¨è™Ÿï¼ˆä¾‹å¦‚ 001, 025ï¼‰

### Fallback æ©Ÿåˆ¶
- å¦‚æœåœ–æª”è¼‰å…¥å¤±æ•—ï¼Œè‡ªå‹•é¡¯ç¤º emoji icon
- ç¢ºä¿ç³»çµ±åœ¨ç„¡åœ–æª”æƒ…æ³ä¸‹ä»å¯é‹ä½œ

## ğŸ“Š CSV è³‡æ–™æ ¼å¼

```csv
id,name,name_zh,hp,atk,def,spa,spd,spe,icon_emoji
1,Bulbasaur,å¦™è›™ç¨®å­,45,49,49,65,65,45,ğŸŒ±
25,Pikachu,çš®å¡ä¸˜,35,55,40,50,50,90,âš¡
```

## ğŸ”§ æ ¸å¿ƒæ¨¡çµ„èªªæ˜

### 1. index.html - ä¸»ç¨‹å¼æ¡†æ¶

**è·è²¬ï¼š**
- å®šç¾©ä¸‰å€‹ç•«é¢çš„çµæ§‹
- æ•´åˆ CSS æ¨£å¼
- å¼•å…¥ JavaScript æ¨¡çµ„

**é—œéµåŠŸèƒ½ï¼š**
```html
<!-- ç•«é¢åˆ‡æ›æ©Ÿåˆ¶ -->
<div class="page active" id="page1">...</div>
<div class="page" id="page2">...</div>
<div class="page" id="page3">...</div>

<!-- é€²åº¦æŒ‡ç¤ºå™¨ -->
<div class="progress-steps">
  <div class="step active" id="step1">1</div>
  <div class="step" id="step2">2</div>
  <div class="step" id="step3">3</div>
</div>
```

---

### 2. app.js - ä¸»æ§åˆ¶é‚è¼¯

**è·è²¬ï¼š**
- é é¢æµç¨‹æ§åˆ¶
- å¯¶å¯å¤¢é¸æ“‡ç®¡ç†
- å¯†æ–‡è¦–è¦ºåŒ–æ¸²æŸ“

**æ ¸å¿ƒå‡½æ•¸ï¼š**

#### `goToPage2()` - å‰å¾€ç•«é¢äºŒ
```javascript
function goToPage2() {
    plaintext = document.getElementById('plaintext-input').value;
    requiredCount = calculateRequiredPokemons(plaintext);
    renderPokemonGrid();
    showPage(2);
}
```

#### `togglePokemonSelection()` - é¸æ“‡å¯¶å¯å¤¢
```javascript
function togglePokemonSelection(pokemon, element) {
    if (å·²é¸æ“‡) {
        å–æ¶ˆé¸æ“‡
    } else if (æœªé”ä¸Šé™) {
        æ–°å¢é¸æ“‡
    }
    updateSelectionCounter();
}
```

#### `renderCipherResult()` - æ¸²æŸ“å¯†æ–‡è¦–è¦ºåŒ–
```javascript
function renderCipherResult() {
    encryptedResults.forEach((result, index) => {
        // å»ºç«‹å¯¶å¯å¤¢å¡ç‰‡
        // é¡¯ç¤º RGB è‰²å¡Š
        // ç¹ªè£½ Plotly é•·æ¢åœ–
    });
}
```

---

### 3. encryption.js - åŠ å¯†æ¼”ç®—æ³•

**è·è²¬ï¼š**
- å¯¦ä½œ XOR ä»£æ›
- å¯¦ä½œå¾ªç’°å¹³ç§»æ›ä½
- è¨ˆç®—èƒ½åŠ›å€¼

**æ ¸å¿ƒå‡½æ•¸ï¼š**

#### `encryptBlock()` - åŠ å¯†å–®ä¸€å€å¡Š
```javascript
function encryptBlock(plaintext, speciesStrength, pokemonIndex) {
    // 1. æ˜æ–‡è½‰ bytesï¼ˆè£œç©ºæ ¼è‡³ 6 bytesï¼‰
    // 2. XOR ä»£æ›
    // 3. å¾ªç’°å¹³ç§»ï¼ˆshift = pokemonIndex % 6ï¼‰
    // 4. å›å‚³å¯†æ–‡ bytes
}
```

**æµç¨‹åœ–ï¼š**
```
æ˜æ–‡ "Hello!"
   â†“ è½‰ ASCII
[72, 101, 108, 108, 111, 33]
   â†“ XOR ç¨®æ—å€¼ [35, 55, 40, 50, 50, 90]
[107, 82, 68, 94, 93, 123]
   â†“ å¾ªç’°å¹³ç§» (shift = 25 % 6 = 1)
[82, 68, 94, 93, 123, 107]  â† å¯†æ–‡
```

#### `calculateAllStats()` - è¨ˆç®—èƒ½åŠ›å€¼
```javascript
function calculateAllStats(speciesStrength, evValues) {
    return [
        calculateStat(speciesStrength[0], evValues[0], true),  // HP
        calculateStat(speciesStrength[1], evValues[1], false), // Atk
        // ... å…¶ä»–èƒ½åŠ›å€¼
    ];
}
```

**èƒ½åŠ›å€¼å…¬å¼ï¼š**
```javascript
// HP èƒ½åŠ›å€¼
HP = âŒŠ(2Ã—ç¨®æ—å€¼ + 31 + âŒŠEV/4âŒ‹) Ã— 50/100âŒ‹ + 50 + 10

// å…¶ä»–èƒ½åŠ›å€¼
Stat = âŒŠ(âŒŠ(2Ã—ç¨®æ—å€¼ + 31 + âŒŠEV/4âŒ‹) Ã— 50/100âŒ‹ + 5) Ã— 1.0âŒ‹
```

---

### 4. decryption.js - è§£å¯†æ¼”ç®—æ³•

**è·è²¬ï¼š**
- åå‘å¾ªç’°å¹³ç§»
- åå‘ XOR ä»£æ›
- å¾ RGB é‚„åŸå¯†æ–‡

**æ ¸å¿ƒå‡½æ•¸ï¼š**

#### `decryptBlock()` - è§£å¯†å–®ä¸€å€å¡Š
```javascript
function decryptBlock(cipherBytes, speciesStrength, pokemonIndex, isLastBlock) {
    // 1. åå‘å¾ªç’°å¹³ç§»
    // 2. åå‘ XORï¼ˆXOR è‡ªèº«åå‡½æ•¸ï¼‰
    // 3. è½‰å›å­—ä¸²
    // 4. ç§»é™¤è£œä½ç©ºæ ¼ï¼ˆåƒ…æœ€å¾Œä¸€å€‹å€å¡Šï¼‰
}
```

**æµç¨‹åœ–ï¼š**
```
å¯†æ–‡ [82, 68, 94, 93, 123, 107]
   â†“ åå‘å¹³ç§» (reverseShift = (6 - 1) % 6 = 5)
[107, 82, 68, 94, 93, 123]
   â†“ åå‘ XOR [35, 55, 40, 50, 50, 90]
[72, 101, 108, 108, 111, 33]
   â†“ è½‰ ASCII
"Hello!"
```

#### `rgbToCipherBytes()` - RGB é‚„åŸå¯†æ–‡
```javascript
function rgbToCipherBytes(rgb1, rgb2) {
    return [
        rgb1[0],  // HP
        rgb2[0],  // Atk
        rgb1[1],  // Def
        rgb2[1],  // SpA
        rgb1[2],  // SpD
        rgb2[2]   // Spe
    ];
}
```

---

### 5. utils.js - å·¥å…·å‡½æ•¸

**è·è²¬ï¼š**
- CSV è®€å–èˆ‡è§£æ
- è³‡æ–™é©—è­‰
- æ ¼å¼åŒ–å·¥å…·

**æ ¸å¿ƒå‡½æ•¸ï¼š**

#### `loadPokemonCSV()` - è¼‰å…¥ CSV
```javascript
async function loadPokemonCSV(filePath) {
    return new Promise((resolve, reject) => {
        Papa.parse(filePath, {
            download: true,
            header: true,
            complete: (results) => {
                // æ ¼å¼åŒ–è³‡æ–™ä¸¦å›å‚³
            }
        });
    });
}
```

#### `validatePlaintext()` - é©—è­‰æ˜æ–‡
```javascript
function validatePlaintext(text) {
    if (text.length === 0) return { valid: false, ... };
    if (text.length > 36) return { valid: false, ... };
    
    // æª¢æŸ¥ ASCII ç¯„åœ (0-127)
    for (let i = 0; i < text.length; i++) {
        if (text.charCodeAt(i) > 127) {
            return { valid: false, ... };
        }
    }
    
    return { valid: true };
}
```

---

## ğŸ¨ è¦–è¦ºåŒ–æ©Ÿåˆ¶

### RGB è‰²å¡Šå°æ‡‰

**å¯†æ–‡ bytes â†’ EV å€¼ â†’ RGB é¡è‰²**

```javascript
// 6 å€‹ EV å€¼åˆ†ç‚º 2 çµ„ RGB
rgb1 = [EV_HP, EV_Def, EV_SpD]    // è‰²å¡Š 1
rgb2 = [EV_Atk, EV_SpA, EV_Spe]   // è‰²å¡Š 2
```

**ç¯„ä¾‹ï¼š**
```
å¯†æ–‡ bytes: [142, 89, 156, 198, 121, 203]
         â†“
rgb1: RGB(142, 89, 156)   - ç´«è‰²ç³»
rgb2: RGB(198, 121, 203)  - ç²‰ç´«è‰²ç³»
```

### Plotly é•·æ¢åœ–

**èƒ½åŠ›å€¼å°æ‡‰é¡è‰²ï¼š**
```javascript
const colors = [rgb1, rgb2, rgb1, rgb2, rgb1, rgb2];
// HP(rgb1), Atk(rgb2), Def(rgb1), SpA(rgb2), SpD(rgb1), Spe(rgb2)
```

---

## ğŸ–¼ï¸ åœ–æª”è™•ç†æ©Ÿåˆ¶

### è‡ªå‹•è·¯å¾‘å°æ‡‰
```javascript
pokemon.iconPath = `assets/icons/${id.padStart(3, '0')}.png`;
pokemon.imagePath = `assets/images/${id.padStart(3, '0')}.png`;
```

### Fallback æ©Ÿåˆ¶
```html
<img src="${pokemon.iconPath}" 
     onerror="this.style.display='none'; 
              this.nextElementSibling.style.display='block';">
<div class="pokemon-icon-emoji" style="display:none;">
    ${pokemon.icon}
</div>
```

**è™•ç†æµç¨‹ï¼š**
```
1. å˜—è©¦è¼‰å…¥ assets/icons/025.png
   â†“
2. è¼‰å…¥å¤±æ•— (onerror)
   â†“
3. éš±è— <img> å…ƒç´ 
   â†“
4. é¡¯ç¤º <div> ä¸­çš„ emoji (âš¡)
```

---

## ğŸ”’ å®‰å…¨æ€§è€ƒé‡

### 1. è¼¸å…¥é©—è­‰
- åƒ…æ¥å— ASCII å­—å…ƒï¼ˆ0-127ï¼‰
- é™åˆ¶æ˜æ–‡é•·åº¦ï¼ˆæœ€å¤š 36 bytesï¼‰
- é˜²æ­¢æ³¨å…¥æ”»æ“Š

### 2. XOR å±¬æ€§
- **è‡ªèº«åå‡½æ•¸**ï¼š`A XOR B XOR B = A`
- **å¯é€†æ€§**ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒé‹ç®—
- **ç„¡éš¨æ©Ÿæ€§**ï¼šç›¸åŒè¼¸å…¥ç”¢ç”Ÿç›¸åŒè¼¸å‡º

### 3. é™åˆ¶
- **Known Plaintext Attack**ï¼šè‹¥çŸ¥é“æ˜æ–‡èˆ‡å¯†æ–‡ï¼Œå¯åæ¨å¯†é‘°
- **Ciphertext Only Attack**ï¼šè‹¥æœ‰è¶³å¤ å¯†æ–‡ï¼Œå¯çµ±è¨ˆåˆ†æ
- **æ•™å­¸ç”¨é€”**ï¼šä¸é©åˆå¯¦éš›å®‰å…¨æ‡‰ç”¨

---

## ğŸ“Š æ•ˆèƒ½åˆ†æ

### æ™‚é–“è¤‡é›œåº¦
- **åŠ å¯†**ï¼šO(n)ï¼Œn = æ˜æ–‡é•·åº¦
- **è§£å¯†**ï¼šO(n)
- **è¦–è¦ºåŒ–æ¸²æŸ“**ï¼šO(m)ï¼Œm = å¯¶å¯å¤¢æ•¸é‡

### ç©ºé–“è¤‡é›œåº¦
- **è¨˜æ†¶é«”**ï¼šO(m)ï¼Œå„²å­˜ m å€‹åŠ å¯†çµæœ

### ç“¶é ¸åˆ†æ
1. **CSV è¼‰å…¥**ï¼šç´„ 100msï¼ˆPapaParseï¼‰
2. **Plotly æ¸²æŸ“**ï¼šç´„ 50ms/åœ–è¡¨
3. **DOM æ“ä½œ**ï¼šç´„ 10ms/å¡ç‰‡

---

## ğŸ”„ è³‡æ–™æµç¨‹

```
ä½¿ç”¨è€…è¼¸å…¥æ˜æ–‡
    â†“
é©—è­‰æ˜æ–‡ (utils.js)
    â†“
é¸æ“‡ N éš»å¯¶å¯å¤¢
    â†“
åŠ å¯† (encryption.js)
    â”œâ”€ ä»£æ› (XOR)
    â”œâ”€ æ›ä½ (å¾ªç’°å¹³ç§»)
    â””â”€ è¨ˆç®—èƒ½åŠ›å€¼
    â†“
è¦–è¦ºåŒ– (app.js + Plotly)
    â”œâ”€ RGB è‰²å¡Š
    â””â”€ é•·æ¢åœ–
    â†“
è§£å¯†é©—è­‰ (decryption.js)
    â”œâ”€ åå‘æ›ä½
    â””â”€ åå‘ä»£æ›
    â†“
é¡¯ç¤ºçµæœ
```

---

## ğŸ¯ è¨­è¨ˆæ¨¡å¼

### 1. æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ¯å€‹ JS æª”æ¡ˆè² è²¬å–®ä¸€è·è²¬
- å‡½æ•¸è·è²¬æ˜ç¢ºï¼Œæ˜“æ–¼æ¸¬è©¦

### 2. äº‹ä»¶é©…å‹•
```javascript
document.addEventListener('DOMContentLoaded', init);
input.addEventListener('input', onPlaintextChange);
element.onclick = () => toggleSelection();
```

### 3. ç‹€æ…‹ç®¡ç†
```javascript
let pokemonData = [];      // å…¨åŸŸç‹€æ…‹
let selectedPokemons = []; // é¸æ“‡ç‹€æ…‹
let encryptedResults = []; // åŠ å¯†çµæœ
```

---

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦ç¯„ä¾‹
```javascript
// æ¸¬è©¦åŠ å¯†/è§£å¯†
const plaintext = "Hello!";
const pokemon = { id: 25, stats: [35, 55, 40, 50, 50, 90] };
const encrypted = encryptBlock(plaintext, pokemon.stats, pokemon.id);
const decrypted = decryptBlock(encrypted.cipherBytes, pokemon.stats, pokemon.id);
assert(plaintext === decrypted);
```

### æ•´åˆæ¸¬è©¦
1. è¼¸å…¥æ˜æ–‡ â†’ é¸æ“‡å¯¶å¯å¤¢ â†’ åŠ å¯† â†’ è§£å¯†
2. é©—è­‰ï¼šåŸå§‹æ˜æ–‡ === è§£å¯†çµæœ

---

## ğŸ“š å»¶ä¼¸é–±è®€

- **å¯†ç¢¼å­¸åŸºç¤**ï¼šä»£æ›å¯†ç¢¼ã€æ›ä½å¯†ç¢¼
- **XOR åŠ å¯†**ï¼šå°ç¨±åŠ å¯†åŸç†
- **å¯¶å¯å¤¢èƒ½åŠ›å€¼è¨ˆç®—**ï¼šå®˜æ–¹å…¬å¼
- **Plotly.js æ–‡ä»¶**ï¼šåœ–è¡¨å®¢è£½åŒ–

---

**æŠ€è¡“æ–‡ä»¶ç‰ˆæœ¬**ï¼š1.0.0  
**æœ€å¾Œæ›´æ–°**ï¼š2025-10-29
